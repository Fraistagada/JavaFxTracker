<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<BorderPane xmlns="http://javafx.com/javafx"
            xmlns:fx="http://javafx.com/fxml"
            fx:controller="fr.esgi.controllers.TrackerController"
            styleClass="root">

    <!-- Top Bar -->
    <top>
        <HBox spacing="15" alignment="CENTER_LEFT" style="-fx-background-color: #2b2b2b; -fx-padding: 10;">
            <Label text="AUDIO TRACKER"
                   style="-fx-text-fill: #00ff00; -fx-font-weight: bold; -fx-font-size: 16;"/>
            <Separator orientation="VERTICAL"/>
            <Label fx:id="patternLabel" text="Pattern: 00" style="-fx-text-fill: #ffffff;"/>
            <Label fx:id="bpmLabel" text="BPM: 125" style="-fx-text-fill: #ffffff"/>
            <Region HBox.hgrow="ALWAYS"/>
            <Button text="Tracker" onAction="#showTracker"
                    style="-fx-background-color: #00aa00; -fx-text-fill: white;"/>
            <Button text="Piano" onAction="#showPiano" style="-fx-background-color: #555555; -fx-text-fill: white;"/>
            <Button text="CrÃ©dits" onAction="#showCredits" style="-fx-background-color: #666666; -fx-text-fill: white;"/>
        </HBox>
    </top>

    <!-- Center - Pattern View -->
    <center>
        <VBox spacing="0" style="-fx-background-color: #1a1a1a; -fx-padding: 10;">
            <!-- Pattern Table -->
            <TableView fx:id="patternTable" VBox.vgrow="ALWAYS"
                       style="-fx-background-color: #000000; -fx-control-inner-background: #000000;">
                <columns>
                    <TableColumn fx:id="rowColumn" text="ROW" prefWidth="45"/>

                    <!-- Canal 1 -->
                    <TableColumn text="CANAL 1" styleClass="channel1-header">
                        <columns>
                            <TableColumn fx:id="note1Column" text="NOTE" prefWidth="55"/>
                            <TableColumn fx:id="octave1Column" text="OCT" prefWidth="40"/>
                            <TableColumn fx:id="instrument1Column" text="INST" prefWidth="45"/>
                            <TableColumn fx:id="volume1Column" text="VOL" prefWidth="40"/>
                            <TableColumn fx:id="effect1Column" text="FX" prefWidth="50"/>
                        </columns>
                    </TableColumn>

                    <!-- SÃ©parateur -->
                    <TableColumn fx:id="separatorColumn" text="" prefWidth="15" sortable="false" resizable="false" styleClass="separator-column"/>

                    <!-- Canal 2 -->
                    <TableColumn text="CANAL 2" styleClass="channel2-header">
                        <columns>
                            <TableColumn fx:id="note2Column" text="NOTE" prefWidth="55"/>
                            <TableColumn fx:id="octave2Column" text="OCT" prefWidth="40"/>
                            <TableColumn fx:id="instrument2Column" text="INST" prefWidth="45"/>
                            <TableColumn fx:id="volume2Column" text="VOL" prefWidth="40"/>
                            <TableColumn fx:id="effect2Column" text="FX" prefWidth="50"/>
                        </columns>
                    </TableColumn>
                </columns>
            </TableView>
        </VBox>
    </center>

    <!-- Right - Edit Panel -->
    <right>
        <VBox fx:id="editPanel" spacing="10" style="-fx-background-color: #2b2b2b; -fx-padding: 15;" prefWidth="280">
            <Label text="Ã‰DITION"
                   style="-fx-text-fill: #00ff00; -fx-font-weight: bold; -fx-font-size: 14;"/>

            <Separator/>

            <Label fx:id="selectedRowLabel" text="Ligne: --"
                   style="-fx-text-fill: #ffaa00;"/>

            <!-- SÃ©lection du canal -->
            <VBox spacing="3">
                <Label text="Canal:" style="-fx-text-fill: white;"/>
                <HBox spacing="10">
                    <ToggleButton fx:id="channel1Btn" text="Canal 1" selected="true"
                                  style="-fx-background-color: #00aa00; -fx-text-fill: white;"/>
                    <ToggleButton fx:id="channel2Btn" text="Canal 2"
                                  style="-fx-background-color: #555555; -fx-text-fill: white;"/>
                </HBox>
            </VBox>

            <Separator/>

            <!-- Note -->
            <VBox spacing="3">
                <Label text="Note:" style="-fx-text-fill: white;"/>
                <ComboBox fx:id="noteCombo" prefWidth="250"/>
            </VBox>

            <!-- Octave -->
            <VBox spacing="3">
                <Label text="Octave:" style="-fx-text-fill: white;"/>
                <ComboBox fx:id="octaveCombo" prefWidth="250"/>
            </VBox>

            <!-- Instrument -->
            <VBox spacing="3">
                <Label text="Instrument:" style="-fx-text-fill: white;"/>
                <ComboBox fx:id="instrumentCombo" prefWidth="250"/>
            </VBox>

            <!-- Volume -->
            <VBox spacing="3">
                <Label text="Volume:" style="-fx-text-fill: white;"/>
                <HBox spacing="5" alignment="CENTER_LEFT">
                    <Slider fx:id="volumeSlider" min="0" max="127" value="100" prefWidth="200"/>
                    <Label fx:id="volumeValueLabel" text="100" prefWidth="35"
                           style="-fx-text-fill: white;"/>
                </HBox>
            </VBox>

            <!-- Effet -->
            <VBox spacing="3">
                <Label text="Effet:" style="-fx-text-fill: white;"/>
                <ComboBox fx:id="effectTypeCombo" prefWidth="250"/>
                <HBox spacing="5" alignment="CENTER_LEFT">
                    <Label text="Params:" style="-fx-text-fill: #aaaaaa;"/>
                    <TextField fx:id="effectParamField" prefWidth="60" maxWidth="60" promptText="00"
                               style="-fx-background-color: #333; -fx-text-fill: #00ff00;"/>
                </HBox>
                <Label fx:id="effectDescLabel" text="" wrapText="true" prefWidth="250"
                       style="-fx-text-fill: #888888; -fx-font-size: 10;"/>
            </VBox>
        </VBox>
    </right>

    <!-- Bottom - Control Bar -->
    <bottom>
        <HBox spacing="10" alignment="CENTER" style="-fx-background-color: #2b2b2b; -fx-padding: 10;">
            <Button fx:id="playBtn" text="â–¶ PLAY" onAction="#handlePlay"
                    style="-fx-background-color: #00aa00; -fx-text-fill: white; -fx-font-weight: bold;"/>
            <Button fx:id="stopBtn" text="â–  STOP" onAction="#handleStop"
                    style="-fx-background-color: #aa0000; -fx-text-fill: white; -fx-font-weight: bold;"/>
            <Button fx:id="pauseBtn" text="âšâš PAUSE" onAction="#handlePause"
                    style="-fx-background-color: #aa8800; -fx-text-fill: white; -fx-font-weight: bold;"/>
            <Button fx:id="saveBtn" text="â­³ Enregistrer" onAction="#handleSave"
                    style="-fx-background-color: #0019aa; -fx-text-fill: white; -fx-font-weight: bold;"/>
            <Button fx:id="loadBtn" text="â­± Charger" onAction="#handleLoad"
                    style="-fx-background-color: #00aaa2; -fx-text-fill: white; -fx-font-weight: bold;"/>
            <Button fx:id="downloadMidi" text="ðŸŽ˜ .midi" onAction="#downloadMidi"
                    style="-fx-background-color: #666666; -fx-text-fill: white; -fx-font-weight: bold;"/>
            <Separator orientation="VERTICAL"/>
            <Label fx:id="tempoLabel" text="Tempo: 125" style="-fx-text-fill: white;"/>
            <Slider fx:id="tempoSlider" min="60" max="200" value="125" prefWidth="150"/>
        </HBox>
    </bottom>

</BorderPane>